import{r as s,bO as C,i as p,kF as T,j as _}from"./index-CR4fhODd.js";import{T as E}from"./Template-BLv2RFpl.js";import{g as R}from"./utiles-Cxfq-lBl.js";import w from"./multibarChart-CJYqVdI-.js";import{S as F}from"./SkeletonBarChart-BNNP2f43.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function q(){const{title:v,color:D,icon:S,dataAnalysis:Y,summaryProps:b,description:g}=R("Duration Spent In Room"),x=s.useContext(C),{chartToDate:c="",chartFromDate:d="",elderlyDetails:a}=x||{},[r,y]=s.useState(p().subtract(1,"day").format("YYYY-MM-DD")),[e,k]=s.useState(p().subtract(31,"day").format("YYYY-MM-DD")),[M,I]=s.useState([]),[j,i]=s.useState(!0),l=s.useCallback(()=>{if(!(a!=null&&a.deviceId)||!a._id||!e||!r){i(!1);return}i(!0),T({uids:a==null?void 0:a.deviceId,elderly_id:a._id,to_date:e,from_date:r}).then(t=>{I(m(t==null?void 0:t.data)),console.log(m(t==null?void 0:t.data)),i(!1)}).catch(t=>{console.log(t),i(!1)})},[a==null?void 0:a.deviceId,a._id,e,r,m]);s.useEffect(()=>{l()},[l]),s.useEffect(()=>{c&&d&&(y(c),k(d))},[c,d]);function m(t){const n=[];return t==null||t.forEach(o=>{const u={date:p(o.datestr).subtract(1,"day").format("YYYY-MM-DD"),data:[]};o.user_activity.static_duration!==void 0&&u.data.push({name:"still_time",value:f(o.user_activity.static_duration),status:"30"}),o.user_activity.walk_duration!==void 0&&u.data.push({name:"walking_duration",value:f(o.user_activity.walk_duration),status:"31"}),o.user_activity.other_duration!==void 0&&u.data.push({name:"other_duration",value:f(o.user_activity.other_duration),status:"32"}),n.push(u)}),n}function f(t){const[n,o,h]=t.split(":").map(Number);return n*60+o+h/60}return _.jsx(E,{title:v,color:D,icon:S,dataAnalysis:Y,description:g,isSummaryBtn:!0,summaryProps:b,children:j?_.jsx(F,{barGroups:25,barsPerGroup:8,gridLines:5,barWidth:40}):_.jsx(w,{data:M,fromDate:e,toDate:r})})}export{q as default};
