import{r as e,ae as ne,af as se,ai as ae,aj as ie,f5 as le,ap as q,h8 as ce,h6 as de,i6 as ge,bK as K,ad as T,i7 as ue,fh as pe,ar as me,b8 as ve}from"./index-CR4fhODd.js";const H=e.createContext({}),fe=t=>{const{antCls:r,componentCls:a,iconCls:o,avatarBg:n,avatarColor:d,containerSize:y,containerSizeLG:g,containerSizeSM:b,textFontSize:x,textFontSizeLG:f,textFontSizeSM:M,iconFontSize:G,iconFontSizeLG:S,iconFontSizeSM:N,borderRadius:h,borderRadiusLG:z,borderRadiusSM:L,lineWidth:s,lineType:C}=t,v=(O,E,R,j)=>({width:O,height:O,borderRadius:"50%",fontSize:E,[`&${a}-square`]:{borderRadius:j},[`&${a}-icon`]:{fontSize:R,[`> ${o}`]:{margin:0}}});return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(t)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:d,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:n,border:`${ie(s)} ${C} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"}}),v(y,x,G,h)),{"&-lg":Object.assign({},v(g,f,S,z)),"&-sm":Object.assign({},v(b,M,N,L)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Se=t=>{const{componentCls:r,groupBorderColor:a,groupOverlapping:o,groupSpace:n}=t;return{[`${r}-group`]:{display:"inline-flex",[r]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:o}},[`${r}-group-popover`]:{[`${r} + ${r}`]:{marginInlineStart:n}}}},he=t=>{const{controlHeight:r,controlHeightLG:a,controlHeightSM:o,fontSize:n,fontSizeLG:d,fontSizeXL:y,fontSizeHeading3:g,marginXS:b,marginXXS:x,colorBorderBg:f}=t;return{containerSize:r,containerSizeLG:a,containerSizeSM:o,textFontSize:n,textFontSizeLG:n,textFontSizeSM:n,iconFontSize:Math.round((d+y)/2),iconFontSizeLG:g,iconFontSizeSM:n,groupSpace:x,groupOverlapping:-b,groupBorderColor:f}},D=ne("Avatar",t=>{const{colorTextLightSolid:r,colorTextPlaceholder:a}=t,o=se(t,{avatarBg:a,avatarColor:r});return[fe(o),Se(o)]},he);var Ce=function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(a[o[n]]=t[o[n]]);return a};const J=e.forwardRef((t,r)=>{const{prefixCls:a,shape:o,size:n,src:d,srcSet:y,icon:g,className:b,rootClassName:x,style:f,alt:M,draggable:G,children:S,crossOrigin:N,gap:h=4,onError:z}=t,L=Ce(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[s,C]=e.useState(1),[v,O]=e.useState(!1),[E,R]=e.useState(!0),j=e.useRef(null),$=e.useRef(null),F=le(r,j),{getPrefixCls:P,avatar:p}=e.useContext(q),u=e.useContext(H),w=()=>{if(!$.current||!j.current)return;const l=$.current.offsetWidth,i=j.current.offsetWidth;l!==0&&i!==0&&h*2<i&&C(i-h*2<l?(i-h*2)/l:1)};e.useEffect(()=>{O(!0)},[]),e.useEffect(()=>{R(!0),C(1)},[d]),e.useEffect(w,[h]);const B=()=>{(z==null?void 0:z())!==!1&&R(!1)},c=ce(l=>{var i,A;return(A=(i=n??(u==null?void 0:u.size))!==null&&i!==void 0?i:l)!==null&&A!==void 0?A:"default"}),_=Object.keys(typeof c=="object"?c||{}:{}).some(l=>["xs","sm","md","lg","xl","xxl"].includes(l)),I=de(_),Q=e.useMemo(()=>{if(typeof c!="object")return{};const l=ge.find(A=>I[A]),i=c[l];return i?{width:i,height:i,fontSize:i&&(g||S)?i/2:18}:{}},[I,c]),m=P("avatar",a),V=K(m),[U,Y,Z]=D(m,V),ee=T({[`${m}-lg`]:c==="large",[`${m}-sm`]:c==="small"}),W=e.isValidElement(d),te=o||(u==null?void 0:u.shape)||"circle",oe=T(m,ee,p==null?void 0:p.className,`${m}-${te}`,{[`${m}-image`]:W||d&&E,[`${m}-icon`]:!!g},Z,V,b,x,Y),re=typeof c=="number"?{width:c,height:c,fontSize:g?c/2:18}:{};let k;if(typeof d=="string"&&E)k=e.createElement("img",{src:d,draggable:G,srcSet:y,onError:B,alt:M,crossOrigin:N});else if(W)k=d;else if(g)k=g;else if(v||s!==1){const l=`scale(${s})`,i={msTransform:l,WebkitTransform:l,transform:l};k=e.createElement(ue,{onResize:w},e.createElement("span",{className:`${m}-string`,ref:$,style:Object.assign({},i)},S))}else k=e.createElement("span",{className:`${m}-string`,style:{opacity:0},ref:$},S);return U(e.createElement("span",Object.assign({},L,{style:Object.assign(Object.assign(Object.assign(Object.assign({},re),Q),p==null?void 0:p.style),f),className:oe,ref:F}),k))}),X=t=>{const{size:r,shape:a}=e.useContext(H),o=e.useMemo(()=>({size:t.size||r,shape:t.shape||a}),[t.size,t.shape,r,a]);return e.createElement(H.Provider,{value:o},t.children)},ye=t=>{var r,a,o,n;const{getPrefixCls:d,direction:y}=e.useContext(q),{prefixCls:g,className:b,rootClassName:x,style:f,maxCount:M,maxStyle:G,size:S,shape:N,maxPopoverPlacement:h,maxPopoverTrigger:z,children:L,max:s}=t,C=d("avatar",g),v=`${C}-group`,O=K(C),[E,R,j]=D(C,O),$=T(v,{[`${v}-rtl`]:y==="rtl"},j,O,b,x,R),F=pe(L).map((u,w)=>me(u,{key:`avatar-key-${w}`})),P=(s==null?void 0:s.count)||M,p=F.length;if(P&&P<p){const u=F.slice(0,P),w=F.slice(P,p),B=(s==null?void 0:s.style)||G,c=((r=s==null?void 0:s.popover)===null||r===void 0?void 0:r.trigger)||z||"hover",_=((a=s==null?void 0:s.popover)===null||a===void 0?void 0:a.placement)||h||"top",I=Object.assign(Object.assign({content:w},s==null?void 0:s.popover),{classNames:{root:T(`${v}-popover`,(n=(o=s==null?void 0:s.popover)===null||o===void 0?void 0:o.classNames)===null||n===void 0?void 0:n.root)},placement:_,trigger:c});return u.push(e.createElement(ve,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},I),e.createElement(J,{style:B},`+${p-P}`))),E(e.createElement(X,{shape:N,size:S},e.createElement("div",{className:$,style:f},u)))}return E(e.createElement(X,{shape:N,size:S},e.createElement("div",{className:$,style:f},F)))},be=J;be.Group=ye;export{be as A};
