import{hp as j,hq as N,a1 as v,r as t,hr as y,hs as S,X as T,j as s,hm as k,ht as I,hu as w,hb as E,hv as P,hw as A,hx as B}from"./index-CR4fhODd.js";function L(){const{page:d,setPage:m,actions:q,setActions:z}=j(),{setCustomers:u}=N(),{type:n}=v(),[c,h]=t.useState(null),x=y("customer"),[i,g]=t.useState(0),[p,b]=t.useState({}),{data:e,isLoading:C,isSuccess:o,refetch:U}=S({...d,...p,monitoring_agency_status:n==="deactivated"?"deactivate":"active",priority:c?-1:1});t.useEffect(()=>{o&&e&&u((e==null?void 0:e.data)||[]),g((e==null?void 0:e.total)||0)},[e,o]);const f=()=>h(a=>!a),l=t.useCallback(T(a=>{b(r=>({...r,search:a==null?void 0:a.trim()})),m(r=>({...r,page:1}))},1e3),[]);return t.useEffect(()=>()=>{l.cancel()},[]),s.jsx(k,{variant:"noborder",title:s.jsxs("div",{className:"text-xl font-normal capitalize flex items-center gap-2",children:[n," Customers"," ",s.jsx(B,{className:`text-sm ${n!=="active"?n=="paused"?"bg-yellow-600":"bg-red-500":""}`,children:i})]}),className:"mb-7",actions:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{className:"",size:"bt",variant:"outline",placeholder:"Search Customer",onChange:a=>{i>0&&l(a.target.value)}}),s.jsxs(E,{variant:"tertiary",onClick:f,className:"flex items-center gap-2 select-none",children:[s.jsx(P.span,{animate:{rotate:c?0:180},transition:{duration:.25,ease:"easeInOut"},className:"inline-block",children:s.jsx(A,{className:"w-5 h-5"})}),s.jsx("span",{children:"Priority"})]})]}),children:s.jsx("div",{className:"bg-background/50",children:s.jsx(I,{columns:x,data:(e==null?void 0:e.data)||[],isPagination:!0,total:i,limit:15,headerClassName:"bg-background/60",headerTextClassName:"text-text/60",isLoading:C,rowClassName:""})})})}export{L as C};
