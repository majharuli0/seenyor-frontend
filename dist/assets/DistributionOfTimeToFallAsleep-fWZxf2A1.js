import{r as o,bO as j,i as c,k2 as C,j as l}from"./index-CR4fhODd.js";import"./mockData-Bpurtgqo.js";import y from"./barChart-CY3WFCIy.js";import{T as E}from"./Template-BLv2RFpl.js";import{g as M}from"./utiles-Cxfq-lBl.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function z({isSummaryBtn:B=!0}){const{title:p,color:i,icon:f,dataAnalysis:d,summaryProps:I,description:D}=M("Distribution of Time to Fall Asleep"),b=o.useContext(j),{chartToDate:e="",chartFromDate:n="",elderlyDetails:t}=b||{},[s,T]=o.useState(c().subtract(1,"day").format("YYYY-MM-DD")),[r,x]=o.useState(c().subtract(31,"day").format("YYYY-MM-DD")),[F,h]=o.useState([]),m=o.useCallback(()=>{!(t!=null&&t.bedRoomIds)||!(t!=null&&t._id)||!r||!s||C({uids:t==null?void 0:t.bedRoomIds,elderly_id:t._id,to_date:r,from_date:s,status:"5"}).then(a=>{A(a==null?void 0:a.data)}).catch(a=>{console.log(a)})},[s,r,t]);function A(a){const Y=a.map(u=>{const _=u.sleep_index_common_list.reduce((S,g)=>S+parseInt(g.value,10),0);return{date:u.date,totalFallAsleepDuration:_}});h(Y)}return o.useEffect(()=>{m()},[m]),o.useEffect(()=>{e&&n&&(T(e),x(n))},[e]),l.jsx(E,{title:p,color:i,icon:f,dataAnalysis:d,description:D,isSummaryBtn:!1,children:l.jsx(y,{data:F,color:i,dataType:"percentage",xUnit:"hour",toDate:"",fromDate:"",chartFor:"fallAsleepDurationDistribution"})})}export{z as default};
