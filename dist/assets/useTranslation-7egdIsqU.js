import{r as u,gG as F,gH as M,gI as P}from"./index-CR4fhODd.js";const U=(t,n,s,c)=>{var e,l,m,g;const o=[s,{code:n,...c||{}}];if((l=(e=t==null?void 0:t.services)==null?void 0:e.logger)!=null&&l.forward)return t.services.logger.forward(o,"warn","react-i18next::",!0);f(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(g=(m=t==null?void 0:t.services)==null?void 0:m.logger)!=null&&g.warn?t.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},E={},L=(t,n,s,c)=>{f(s)&&E[s]||(f(s)&&(E[s]=new Date),U(t,n,s,c))},T=(t,n)=>()=>{if(t.isInitialized)n();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),n()};t.on("initialized",s)}},S=(t,n,s)=>{t.loadNamespaces(n,T(t,s))},I=(t,n,s,c)=>{if(f(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(n)>-1)return S(t,s,c);s.forEach(o=>{t.options.ns.indexOf(o)<0&&t.options.ns.push(o)}),t.loadLanguages(n,T(t,c))},k=(t,n,s={})=>!n.languages||!n.languages.length?(L(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(t,{lng:s.lng,precheck:(c,o)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&c.services.backendConnector.backend&&c.isLanguageChangingTo&&!o(c.isLanguageChangingTo,t))return!1}}),f=t=>typeof t=="string",G=t=>typeof t=="object"&&t!==null,_=u.createContext();class j{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const H=(t,n)=>f(n)?n:G(n)&&f(n.defaultValue)?n.defaultValue:Array.isArray(t)?t[t.length-1]:t,W={t:H,ready:!1},X=()=>()=>{},$=(t,n={})=>{var y,b;const{i18n:s}=n,{i18n:c,defaultNS:o}=u.useContext(_)||{},e=s||c||F();e&&!e.reportNamespaces&&(e.reportNamespaces=new j),e||L(e,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=u.useMemo(()=>{var a;return{...M(),...(a=e==null?void 0:e.options)==null?void 0:a.react,...n}},[e,n]),{useSuspense:m,keyPrefix:g}=l,i=u.useMemo(()=>{var r;const a=o||((r=e==null?void 0:e.options)==null?void 0:r.defaultNS);return f(a)?[a]:a||["translation"]},[t,o,e]);(b=(y=e==null?void 0:e.reportNamespaces)==null?void 0:y.addUsedNamespaces)==null||b.call(y,i);const O=u.useCallback(a=>{if(!e)return X;const{bindI18n:r,bindI18nStore:d}=l;return r&&e.on(r,a),d&&e.store.on(d,a),()=>{r&&r.split(" ").forEach(N=>e.off(N,a)),d&&d.split(" ").forEach(N=>e.store.off(N,a))}},[e,l]),w=u.useRef(),C=u.useCallback(()=>{if(!e)return W;const a=!!(e.isInitialized||e.initializedStoreOnce)&&i.every(A=>k(A,e,l)),r=e.getFixedT(n.lng||e.language,l.nsMode==="fallback"?i:i[0],g),d=w.current;if(d&&d.ready===a&&d.lng===(n.lng||e.language)&&d.keyPrefix===g)return d;const N={t:r,ready:a,lng:n.lng||e.language,keyPrefix:g};return w.current=N,N},[e,i,g,l,n.lng]),[R,v]=u.useState(0),{t:p,ready:h}=P.useSyncExternalStore(O,C,C);u.useEffect(()=>{if(e&&!h&&!m){const a=()=>v(r=>r+1);n.lng?I(e,n.lng,i,a):S(e,i,a)}},[e,n.lng,i,h,m,R]);const x=e||{},z=u.useMemo(()=>{const a=[p,x,h];return a.t=p,a.i18n=x,a.ready=h,a},[p,x,h]);if(e&&m&&!h)throw new Promise(a=>{const r=()=>a();n.lng?I(e,n.lng,i,r):S(e,i,r)});return z};export{$ as u};
