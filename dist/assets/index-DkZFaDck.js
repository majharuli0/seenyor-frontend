import{a1 as $,V as q,r as t,S as F,j as e,K as G,G as A,Y as K,Z as Q,$ as V}from"./index-CR4fhODd.js";import"./request-BcXuuXiC.js";import{D as Y}from"./index-C3zqOI4w.js";import"./index-C_UpaPkQ.js";import{A as J}from"./index-DDcXbrpl.js";import{S as W,A as X}from"./Sort-C4l355fM.js";import{A as _}from"./AdminSupportAgentTableAction-CgZRwmNf.js";import{C as ee,g as te}from"./CreateAndEditUsers-Dtf0D2Ik.js";import"./CustomInput-B54BPh_e.js";let d;function se(r,u=500,p=!0){p?d||(d=!0,typeof r=="function"&&r(),setTimeout(()=>{d=!1},u)):d||(d=!0,setTimeout(()=>{d=!1,typeof r=="function"&&r()},u))}const ve=()=>{const r=$();let u=q();const[p,w]=t.useState("Dashboard"),{role:y}=t.useContext(F),[ae,re]=t.useState(!1),[f,L]=t.useState("Support Agents"),[C,ne]=t.useState("[Nursing Home]â€™s Support Agents"),[T,ie]=t.useState("Add New Support Agent"),[S,E]=t.useState(""),[i,I]=t.useState(""),[M,j]=t.useState(!1),[l,c]=t.useState({current:1,size:10}),[H,le]=t.useState([{text:"Support Agents",bo:!0,warring:!1}]),[P,b]=t.useState({}),[O,k]=t.useState(0);let[D,oe]=t.useState([{title:"Nursing Home",key:"id",render:a=>e.jsx("button",{children:e.jsx(G,{data:a})})},{title:"Contact",render:a=>e.jsx("button",{children:e.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:a.contactNumber})})},{title:"",key:"id",width:100,render:a=>e.jsx(_,{getlist:()=>x(s),data:a})}]);const U=["Time","Name"],[de,ce]=t.useState({nursingHomes:0,elderlies:0,devicesConnected:0,monthlyRevenue:0}),[s,m]=t.useState({order:"1",orderType:"time",name:""}),[B,Z]=t.useState([]),R=()=>{j(!0)},[ue,me]=t.useState(A.get("user")),N=()=>{let a=A.get("user"),n=new URLSearchParams(u.search),o={...s},h=n.get("name"),g=n.get("id");w("User"),o[h]=g,o.role="Support Agent",h=="salesAgentId"&&b({nursingHomeId:g,salesAgentId:r.id}),h=="distributorId"&&b({nursingHomeId:g,distributorId:r.id});let v=y;v||(v=a.role),m(o),c({current:1,size:10})},x=a=>{a.role&&se(()=>{te({...a,...l}).then(n=>{var o;k(n.data.total),Z((o=n==null?void 0:n.data)==null?void 0:o.records)})})};t.useEffect(()=>{N()},[N]),t.useEffect(()=>{x(s)},[l]),t.useEffect(()=>{i&&s.orderType!=i&&(m({...s,orderType:i.toLowerCase(),order:i==="Time"?"1":"0"}),c({...l,current:1}))},[i]),t.useEffect(()=>{c({...l,current:1})},[s.order]);const z=()=>{m({...s,name:S.trim()}),c({...l,current:1})};return e.jsxs("div",{className:"pl-[20px] pr-[50px]",children:[e.jsxs("div",{className:"h-[100px] flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:" text-[28px] font-semibold font-cblock ",children:p})}),e.jsxs("div",{className:"h-[40px] pl-[20px] pr-[20px]  rounded-[20px] bg-cblock   flex items-center ",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:e.jsx("path",{d:"M8.65073 2.31039L11.4807 5.14035L4.31724 12.3038L1.48886 9.47387L8.65073 2.31039ZM13.6281 1.62787L12.3661 0.365808C11.8783 -0.121936 11.0863 -0.121936 10.5969 0.365808L9.38799 1.57474L12.218 4.40473L13.6281 2.99457C14.0064 2.61625 14.0064 2.00617 13.6281 1.62787ZM0.00787518 13.4516C-0.0436269 13.6834 0.165643 13.8911 0.397455 13.8347L3.551 13.0701L0.722618 10.2401L0.00787518 13.4516Z",fill:"white"})}),e.jsx("div",{className:"pl-[20px]  text-white text-[14px] font-semibold  ",children:"Edit Nursing Home"})]})]}),e.jsx("div",{className:"pt-[20px] pb-[10px] flex",children:e.jsx(Y,{menus:H,activeTab:f,setActiveTab:L})}),e.jsx("div",{className:"",children:(f=="Support Agents"||f=="Nursing Homes")&&e.jsxs("div",{children:[e.jsxs("div",{className:" bg-white rounded-2xl",children:[e.jsxs("div",{className:" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2",children:[e.jsx("div",{className:" flex items-center justify-between w-full",children:e.jsx("h2",{className:" text-2xl font-bold text-text-primary",children:C})}),e.jsxs("div",{className:" flex items-center justify-end gap-5 w-full",children:[e.jsx(K,{search:S,setSearch:E,handBlurchange:z,placeholder:"Search Nursing Home"}),e.jsx(W,{query:s,setQuey:m,selected:i,setSelected:I,data:U}),e.jsxs(Q,{onClick:()=>R(),className:" hidden lg:flex min-w-[80px]",children:[e.jsx(J,{})," ",T]})]})]}),e.jsx("div",{className:" grid grid-cols-1",children:e.jsx(V.Provider,{value:{getlist:x,query:s,totle:O,page:l,SetPage:c},children:e.jsx(X,{tableData:B,columns:D})})})]}),e.jsx(ee,{item:{},changeParams:P,getlist:()=>x(s),role:s.role,modalOPen:M,setModalOpen:j})]})})]})};export{ve as default};
