import{r as e,bO as M,i as h,k5 as _,j as u}from"./index-CR4fhODd.js";import{S as k,R as A}from"./SkeletonRateChart-B_Yg2cAZ.js";import{T as I}from"./Template-BLv2RFpl.js";import{g as v}from"./utiles-Cxfq-lBl.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function w({isSummaryBtn:l=!0,dataType:R="Week"}){const D=e.useContext(M),[g,x]=e.useState([]),[b,r]=e.useState(!0),{chartToDate:m="",chartFromDate:c="",elderlyDetails:a={}}=D||{},{title:y,color:f,icon:C,dataAnalysis:Y,summaryProps:T,description:j}=v("Respiratory Rate"),[s,S]=e.useState(h().subtract(1,"day").format("YYYY-MM-DD")),[n,B]=e.useState(h().subtract(7,"days").format("YYYY-MM-DD")),d=e.useCallback(()=>{if(!(a!=null&&a.bedRoomIds)||!a._id||!n||!s){r(!1);return}r(!0),_({uids:a==null?void 0:a.bedRoomIds,elderly_id:a._id,to_date:n,from_date:s}).then(i=>{const t=i.data;console.log("Breath Rate Data:",t);const p={xdata:t==null?void 0:t.map(o=>o.date),maxArray:t==null?void 0:t.map(o=>o.max),minArray:t==null?void 0:t.map(o=>o.min),allAvgNumber:Math.round((t==null?void 0:t.reduce((o,E)=>o+E.avg,0))/t.length)};console.log("Transformed Breath Rate Data:",p),x(p),r(!1)}).catch(i=>{console.log("Breath Rate Error:",i),r(!1)})},[s,n,a]);return e.useEffect(()=>{d()},[d]),e.useEffect(()=>{m&&c&&(S(m),B(c))},[m,c]),u.jsx(I,{title:y,color:f,icon:C,dataAnalysis:Y,description:j,isSummaryBtn:l,summaryProps:T,children:b?u.jsx(k,{barCount:7,barWidth:40,gridLines:5}):u.jsx(A,{dateType:R,color:f,cheartInfo:g,fromDate:n,toDate:s})})}export{w as default};
