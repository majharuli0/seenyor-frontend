import{bB as I,j2 as H,r as n,G as g,u as A,j3 as G,j4 as P,j5 as W,j6 as K,j7 as V,j as e,ha as T,a6 as X,gF as Y,a4 as J,hy as Q,j8 as F,j9 as Z,ja as B,jb as q,hu as ee,hc as se,jc as te,_ as v,he as ae,hf as oe,jd as re,je as ne,jf as le,hg as ce,jg as N,hi as C,jh as ie,hl as de,hR as me,ji as xe,jj as he,jk as ge,aG as fe,jl as ue,hn as M,jm as je,iW as pe}from"./index-CR4fhODd.js";import{c as be}from"./regex-bntiaqjT.js";import{T as ve,S as Ne,M as we}from"./ThemeToggleSwitch-D82_0eRY.js";import{S as ye}from"./search-BCl8bjyl.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Se=I("arrow-left",ke);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Te=I("log-out",_e);function Ce(){const{can:t}=H(),[l,d]=n.useState(!1),m=g.get("rootToken"),s=A(),c=[{to:"/ms/dashboard",icon:G,label:"Dashboard"},{to:"/ms/customers",icon:P,label:"Customers"},{to:"/ms/analytics",icon:W,label:"Analytics"},t("manage_agent")&&{to:"/ms/role-managment",icon:K,label:"Manage"},t("branding_setting_access")&&{to:"/ms/settings",icon:V,label:"Settings"}].filter(Boolean),o=r=>{r=="super_admin"?s("/super-admin/users"):s("/support-nurnt/dashboard/suspended-user")},x=()=>{const r=g.get("rootToken");r&&(J(r),g.remove("rootToken"))};function h(){x(),d(!0);const r=X()||g.get("rootToken"),i=Y(r);g.set("user",i),g.set("mainRole",i.role),g.set("role",i.role),setTimeout(()=>{d(!1),o(i==null?void 0:i.role)},1500)}return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"hidden sm:flex w-20 bg-background border-r border-border/50 dark:border-none flex-col items-center relative",children:e.jsx("nav",{className:"flex flex-col flex-1 items-center justify-center space-y-6",children:c.map(({to:r,icon:i})=>e.jsx(T,{to:r,className:({isActive:f})=>`flex items-center justify-center h-12 w-12 rounded-full transition-colors 
                ${f?"bg-text/10 text-text":"text-foreground/50 hover:text-foreground hover:bg-text/10"}`,children:e.jsx(i,{className:"h-5 w-5"})},r))})}),e.jsx("nav",{className:"sm:hidden  scrollbar-thin fixed bottom-0 left-0 right-0 !bg-background/60 border-t border-border/70 flex overflow-x-auto justify-around px-2 py-2 z-50 backdrop-blur-md ",children:c.map(({to:r,icon:i,label:f})=>e.jsxs(T,{to:r,className:({isActive:p})=>`flex flex-col items-center justify-center flex-shrink-0 mx-1 px-3 py-2 rounded-xl text-xs transition-all duration-300
              ${p?"text-text bg-text/10":"text-foreground/60 hover:text-foreground hover:bg-text/10"}`,children:[e.jsx(i,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-[10px]",children:f})]},r))}),m&&e.jsx("div",{onClick:h,className:"absolute bottom-2 left-[1%] p-2 bg-text/10 rounded-md hover:bg-white/20 cursor-pointer",children:e.jsx(Se,{})})]})}function Me({title:t="SEENYOR MONITORING"}){const l=n.useRef(null),[d,m]=n.useState(0);n.useEffect(()=>{l.current&&m(l.current.getBBox().width)},[t]);const s=60,c=62,o=d+s*3;return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:c,viewBox:`0 0 ${o} ${c}`,fill:"none",className:"mx-auto",children:[e.jsx("path",{d:`M1 1 L60 ${c-1} H${o-60} L${o-1} 1`,stroke:"url(#paint0_linear)",strokeWidth:"2"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"paint0_linear",x1:o/2,y1:c,x2:o/2,y2:"1",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#7C7C7C",stopOpacity:"0.31"}),e.jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]})}),e.jsx("text",{ref:l,x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"font-bold",fontSize:"24",style:{letterSpacing:"1px",fill:"rgb(var(--ms-text-color))"},children:t})]})}const L="https://elderlycare2.s3.amazonaws.com/",U={logoUrl:"/seenyor.svg",logoDarkUrl:"/seenyor_black.svg"},Le=({src:t,preview:l,alt:d,className:m,fallback:s})=>{const[c,o]=n.useState(l||t||s);return console.log(l||t||s),n.useEffect(()=>{o(l||t||s)},[l,t,s]),e.jsx("img",{src:c,alt:d,className:m,onError:()=>o(s)})};function Ue(){var S;const{appName:t,logoUrl:l,logoDarkUrl:d}=Q().branding,{getUser:m}=F(),[s,c]=n.useState({}),[o,x]=n.useState(""),[,h]=n.useState(!1),[r,i]=n.useState(),{isDemoMode:f,toggleDemoMode:p}=Z(),R=location.pathname,$=A(),{theme:z,setTheme:w}=B(),{data:j,isLoading:y,isSuccess:E}=q({search:o,role:"monitoring_agent"},{enabled:o.length!=0});n.useEffect(()=>{i((j==null?void 0:j.data)||[])},[j,E]),n.useEffect(()=>{(o==null?void 0:o.length)==0&&i([])},[o]),n.useEffect(()=>{c(m())},[R]);const k=a=>{w(a==="system"?"system":a)},b=(a,_)=>{if(!_)return a;const O=be(_,"gi");return a==null?void 0:a.replace(O,'<mark style="background-color: #80CAA7; color: white;">$1</mark>')},u=z==="light",D=async()=>{me()};return e.jsxs("header",{className:"relative h-16 bg-background px-4 sm:px-6 flex items-center justify-between z-10 border-b border-border/40",children:[e.jsx("div",{className:`absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r 
        from-primary/20 via-background to-primary/20`}),e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Le,{src:u?L+(d||""):L+(l||""),alt:"logo",className:"h-8 w-auto",fallback:u?U.logoDarkUrl:U.logoUrl})}),e.jsxs("div",{className:"hidden sm:flex items-center min-w-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(ee,{"aria-label":"Search",placeholder:"Search...",value:o,className:"pl-10 pr-3 h-9 w-[350px] text-sm outline-none border-none !ring-0 bg-transparent",onChange:a=>x(a.target.value),onFocus:()=>h(!0)}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[y&&e.jsx(se,{className:"h-4 w-4 animate-spin text-muted-foreground"}),o&&!y&&e.jsx("button",{onClick:()=>{x(""),h(!1)},className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Clear search",children:e.jsx(te,{className:"h-4 w-4"})})]})]}),(r==null?void 0:r.length)!==0&&o.trim()!==""&&e.jsx("div",{id:"searchResult",className:"mt-0 max-h-[600px] overflow-auto rounded-lg shadow-lg bg-card border border-border absolute top-14 left-22 z-[1000] w-[600px] ",children:e.jsx("ul",{children:r==null?void 0:r.map(a=>e.jsxs("li",{className:"p-4 hover:bg-card-50 border-b border-border cursor-pointer",onClick:()=>{$(`/ms/role-managment/${a==null?void 0:a._id}`)},children:[e.jsx("div",{className:"font-semibold text-lg text-text",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:v.sanitize(b(a.name+" "+a.last_name,o))}})}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:v.sanitize(b(a==null?void 0:a.email,o))}})]}),e.jsxs("div",{className:"text-sm text-text/80",children:[e.jsx("strong",{children:"Contact Number:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:v.sanitize(b((a==null?void 0:a.contact_code)+" "+(a==null?void 0:a.contact_number),o))}})]})]},a._id))})})]})]}),e.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 hidden md:block",children:e.jsx(Me,{title:t})}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ve,{checked:u,onCheckedChange:a=>k(a?"light":"dark")})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden md:flex flex-col text-right",children:[e.jsxs("span",{className:"text-base opacity-90",children:[s==null?void 0:s.name," ",s==null?void 0:s.last_name]}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:s==null?void 0:s.role})]}),e.jsxs(ae,{children:[e.jsx(oe,{asChild:!0,children:e.jsx("button",{className:"outline-none focus:ring-0",children:e.jsxs(re,{className:"h-9 w-9 cursor-pointer",children:[e.jsx(ne,{src:s==null?void 0:s.avatar,alt:s==null?void 0:s.name}),e.jsx(le,{children:(S=s==null?void 0:s.name)==null?void 0:S.slice(0,2)})]})})}),e.jsxs(ce,{align:"end",className:"w-fit",children:[e.jsxs("div",{className:"flex flex-col items-start px-3 py-2 border-b border-border/40",children:[e.jsx("span",{className:"text-sm font-medium",children:s==null?void 0:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s==null?void 0:s.email})]}),e.jsxs(N,{onClick:()=>k(u?"dark":"light"),className:"flex items-center justify-between  lg:hidden",children:[e.jsx("span",{children:"Toggle Theme"}),u?e.jsx(Ne,{className:"h-4 w-4 text-yellow-400"}):e.jsx(we,{className:"h-4 w-4 text-blue-400"})]}),e.jsx(C,{}),e.jsxs(N,{onSelect:a=>a.preventDefault(),className:"flex items-center justify-between gap-3 cursor-default",children:[e.jsx(ie,{htmlFor:"demo-mode-dropdown",className:"text-sm font-medium cursor-pointer flex-1",children:"Demo Mode"}),e.jsx(de,{id:"demo-mode-dropdown",checked:f,onCheckedChange:a=>p(a),className:"scale-90"})]}),e.jsx(C,{}),e.jsxs(N,{variant:"destructive",onClick:()=>D(),className:"flex items-center justify-between",children:[e.jsx("span",{children:"Logout"}),e.jsx(Te,{className:"h-4 w-4 text-danger"})]})]})]})]})]})]})}const Ie=t=>{const{theme:l="light"}=B();return e.jsx(xe,{theme:l,className:"toaster group",style:{"--normal-bg":"rgb(var(--ms-card-color))","--normal-text":"rgb(var(--ms-popover-foreground-color))","--normal-border":"rgb(var(--ms-border-color))"},...t})},Ae=({children:t})=>e.jsx("div",{"data-vaul-drawer-wrapper":"",children:e.jsx("div",{className:"relative flex min-h-screen flex-col bg-background overflow-hidden",children:t})}),Fe=()=>{var h;const{notificationEvent:t}=fe(),[l,d]=n.useState(null);ue(r=>r.fetchDevices),n.useEffect(()=>{if(t)switch(t==null?void 0:t.event){case"5":M.warning(t==null?void 0:t.title);break;case"2":M.error(t==null?void 0:t.title,{description:t==null?void 0:t.body});break}},[t]);const{getUser:m,setUserDetails:s}=F(),c=(h=m())==null?void 0:h._id,{data:o,isFetched:x}=je({id:c},{enabled:!!c});return n.useEffect(()=>{x&&o&&s(o==null?void 0:o.data)},[x,o]),e.jsxs("div",{className:"h-screen w-screen flex flex-col overflow-x-hidden",children:[e.jsx(Ue,{}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(Ce,{}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-background pb-[75px] sm:pb-0 p-3 sm:p-6",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"w-full mx-auto h-full flex items-center justify-center",children:e.jsx("div",{className:"loader "})}),children:e.jsx(pe,{})})})]}),e.jsx(Ie,{richColors:!0,position:"top-right"})]})},Ee=()=>e.jsx(he,{children:e.jsx(ge,{children:e.jsx(Ae,{children:e.jsx(Fe,{})})})});export{Ee as default};
