import{r as o,bO as E,i as u,k2 as M,j as l}from"./index-CR4fhODd.js";import"./mockData-Bpurtgqo.js";import I from"./barChart-CY3WFCIy.js";import{T as R}from"./Template-BLv2RFpl.js";import{g as k}from"./utiles-Cxfq-lBl.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function G({isSummaryBtn:p=!0}){const{title:d,color:i,icon:f,dataAnalysis:D,summaryProps:T,description:x}=k("Time to Fall Asleep"),F=o.useContext(E),{chartToDate:r="",chartFromDate:c="",elderlyDetails:t}=F||{},[e,A]=o.useState(u().subtract(1,"day").format("YYYY-MM-DD")),[s,S]=o.useState(u().subtract(31,"day").format("YYYY-MM-DD")),[Y,_]=o.useState([]),n=o.useCallback(()=>{!(t!=null&&t.bedRoomIds)||!(t!=null&&t._id)||!s||!e||M({uids:t==null?void 0:t.bedRoomIds,elderly_id:t._id,to_date:s,from_date:e,status:"5"}).then(a=>{b(a==null?void 0:a.data)}).catch(a=>{console.log(a)})},[e,s,t]);function b(a){const h=a.map(m=>{const g=m.sleep_index_common_list.reduce((j,C)=>j+parseInt(C.value,10),0);return{date:m.date,totalFallAsleepDuration:g}});_(h)}return o.useEffect(()=>{n()},[n]),o.useEffect(()=>{r&&c&&(A(r),S(c))},[r]),l.jsx(R,{title:d,color:i,icon:f,dataAnalysis:D,description:x,isSummaryBtn:p,summaryProps:T,children:l.jsx(I,{data:Y,color:i,dataType:"duration",chartFor:"timeToFallAsleep",toDate:e,fromDate:s})})}export{G as default};
