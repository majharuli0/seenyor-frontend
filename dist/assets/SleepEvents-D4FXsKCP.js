import{r as i,S as h,bO as g,j as t,kD as y,jB as d,lh as j}from"./index-CR4fhODd.js";import E from"./TimelineBar-CqxX7qCV.js";import{T}from"./Template-BLv2RFpl.js";import{S as b}from"./SkeletonSleepingTimeline-DL4Wt8st.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";const _=({count:r,eventName:o,color:e})=>t.jsxs("div",{className:"flex items-center gap-2 text-sm py-2 px-4 bg-white rounded-lg shadow-sm border border-text-primary/10",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded border-2 border-white shadow-sm",style:{backgroundColor:e}}),t.jsx("span",{className:"text-gray-600 font-medium min-w-[60px]",children:o})]}),t.jsx("span",{className:"text-gray-600 text-sm font-bold",children:r})]});function B(){const{sleepEventsType:r,sleepEventsColor:o}=i.useContext(h),{sleepData:e,elderlyDetails:a,sleepDataLoading:c}=i.useContext(g),[p,x]=i.useState([]),u={title:"Sleep Events Summary",pickerTypes:["day","range"],chartType:"multibar_sleep_events",dataType:"time",color:"#FF725E",apisProps:{endpoint:y,query:{uids:a==null?void 0:a.bedRoomIds}}};return i.useEffect(()=>{if(e!=null&&e.alarm_events){const s=e==null?void 0:e.alarm_events.reduce((n,f)=>{const m=r[f.event_type],l=n.find(v=>v.event_name===m);return l?l.count+=1:n.push({event_name:m,count:1,color:o[m]}),n},[]);x(s)}},[e,r,o]),t.jsx(T,{title:"Sleep Events",color:"#FF725E",icon:t.jsx(j,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",description:"Displays a timeline of sleep-related events (e.g., snoring, apnea) detected during the sleep session, along with a summary count for each event type. This helps in identifying specific sleep disturbances.",summaryProps:u,children:c?t.jsx(b,{}):t.jsxs(t.Fragment,{children:[t.jsx(E,{alarmEvents:e==null?void 0:e.alarm_events,enterBedTime:d(e==null?void 0:e.get_bed_idx),getupAfterTime:d(e==null?void 0:e.leave_bed_idx),noDataText:"No Data Detected for Today"}),t.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:p.map((s,n)=>t.jsx(_,{count:s.count,eventName:s.event_name,color:s.color},n))})]})})}export{B as default};
