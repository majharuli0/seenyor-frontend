import{r as a,bO as k,i as p,k6 as M,j as u}from"./index-CR4fhODd.js";import{S as _,R as A}from"./SkeletonRateChart-B_Yg2cAZ.js";import{T as E}from"./Template-BLv2RFpl.js";import{g as I}from"./utiles-Cxfq-lBl.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function w({isSummaryBtn:h=!0,dataType:g="Week"}){const{title:W,color:f,icon:x,dataAnalysis:D,summaryProps:R,description:b}=I("Heart Rate"),C=a.useContext(k),[Y,y]=a.useState([]),[H,r]=a.useState(!0),{chartToDate:s="",chartFromDate:c="",elderlyDetails:e={}}=C||{},[n,j]=a.useState(p().subtract(1,"day").format("YYYY-MM-DD")),[m,S]=a.useState(p().subtract(7,"days").format("YYYY-MM-DD")),d=a.useCallback(()=>{if(!(e!=null&&e.bedRoomIds)||!e._id||!m||!n){r(!1);return}r(!0),M({uids:e==null?void 0:e.bedRoomIds,elderly_id:e._id,to_date:m,from_date:n}).then(i=>{const t=i.data;console.log(t);const l={xdata:t==null?void 0:t.map(o=>o.date),maxArray:t==null?void 0:t.map(o=>o.max),minArray:t==null?void 0:t.map(o=>o.min),allAvgNumber:Math.round((t==null?void 0:t.reduce((o,T)=>o+T.avg,0))/t.length)};console.log(l),y(l),r(!1)}).catch(i=>{console.log(i),r(!1)})},[n,m,e]);return a.useEffect(()=>{d()},[d]),a.useEffect(()=>{s&&c&&(j(s),S(c))},[s,c]),u.jsx(E,{title:s?"Heart Rate":"Heart Rate (Weekly)",color:f,icon:x,dataAnalysis:D,description:b,isSummaryBtn:h,summaryProps:R,children:H?u.jsx(_,{height:300,chartHeight:250,barCount:7,barWidth:40,gridLines:5}):u.jsx(A,{dateType:g,color:f,cheartInfo:Y,fromDate:m,toDate:n})})}export{w as default};
