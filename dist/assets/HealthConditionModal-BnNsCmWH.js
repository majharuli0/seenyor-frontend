import{dp as de,jE as ue,jF as me,dr as xe,jG as fe,jH as I,jI as he,jJ as ge,al as G,dE as W,jK as je,jL as be,jM as Q,jN as pe,at as Ce,r as d,l as Se,jO as ve,bO as Te,b0 as Be,jP as Oe,z as j,j as n,b5 as E,a5 as k,b2 as ye,C as U,T as N,g as ze,bs as D,B as Ee,jQ as ke,jR as Ne}from"./index-CR4fhODd.js";const Pe=s=>{const e=s!=null&&s.algorithm?de(s.algorithm):ue,r=Object.assign(Object.assign({},me),s==null?void 0:s.token);return xe(r,{override:s==null?void 0:s.token},e,fe)};function Ie(s){const{sizeUnit:e,sizeStep:r}=s,o=r-2;return{sizeXXL:e*(o+10),sizeXL:e*(o+6),sizeLG:e*(o+2),sizeMD:e*(o+2),sizeMS:e*(o+1),size:e*o,sizeSM:e*o,sizeXS:e*(o-1),sizeXXS:e*(o-1)}}const we=(s,e)=>{const r=e??I(s),o=r.fontSizeSM,f=r.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),Ie(e??s)),he(o)),{controlHeight:f}),ge(Object.assign(Object.assign({},r),{controlHeight:f})))},u=(s,e)=>new G(s).setA(e).toRgbString(),b=(s,e)=>new G(s).lighten(e).toHexString(),Ae=s=>{const e=W(s,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},Me=(s,e)=>{const r=s||"#000",o=e||"#fff";return{colorBgBase:r,colorTextBase:o,colorText:u(o,.85),colorTextSecondary:u(o,.65),colorTextTertiary:u(o,.45),colorTextQuaternary:u(o,.25),colorFill:u(o,.18),colorFillSecondary:u(o,.12),colorFillTertiary:u(o,.08),colorFillQuaternary:u(o,.04),colorBgSolid:u(o,.95),colorBgSolidHover:u(o,1),colorBgSolidActive:u(o,.9),colorBgElevated:b(r,12),colorBgContainer:b(r,8),colorBgLayout:b(r,0),colorBgSpotlight:b(r,26),colorBgBlur:u(o,.04),colorBorder:b(r,26),colorBorderSecondary:b(r,19)}},Re=(s,e)=>{const r=Object.keys(je).map(m=>{const h=W(s[m],{theme:"dark"});return Array.from({length:10},()=>1).reduce((i,v,g)=>(i[`${m}-${g+1}`]=h[g],i[`${m}${g+1}`]=h[g],i),{})}).reduce((m,h)=>(m=Object.assign(Object.assign({},m),h),m),{}),o=e??I(s),f=be(s,{generateColorPalettes:Ae,generateNeutralColorPalettes:Me});return Object.assign(Object.assign(Object.assign(Object.assign({},o),r),f),{colorPrimaryBg:f.colorPrimaryBorder,colorPrimaryBgHover:f.colorPrimaryBorderHover})};function Fe(){const[s,e,r]=Ce();return{theme:s,token:e,hashId:r}}const He={defaultSeed:Q.token,useToken:Fe,defaultAlgorithm:I,darkAlgorithm:Re,compactAlgorithm:we,getDesignToken:Pe,defaultConfig:Q,_internalContext:pe};function P(){return P=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},P.apply(this,arguments)}const $e=(s,e)=>d.createElement(Se,P({},s,{ref:e,icon:ve})),Le=d.forwardRef($e);function Je({setModalOpen:s,modalOpen:e,mode:r="create",diseases:o,custom_condition:f=[],elderly_id:m}){const{token:h}=He.useToken(),{elderlyDetails:i,getElderlyDetails:v}=d.useContext(Te),[g,w]=d.useState((i==null?void 0:i.diseases)||[]);d.useRef((i==null?void 0:i.diseases)||[]);const[p,T]=d.useState(null),[O,J]=d.useState(!1),[A,_e]=d.useState(!1),[V,q]=d.useState(""),[Xe,Qe]=d.useState(""),[B,M]=d.useState(""),[y,R]=d.useState(""),[F,H]=d.useState(""),$=d.useRef(null),Y=d.useRef(null),Z=d.useRef(null);d.useEffect(()=>{e||T([]),w(i==null?void 0:i.diseases),T(X(i==null?void 0:i.comments))},[e]),d.useEffect(()=>{T(X(i==null?void 0:i.comments))},[i]);const{register:Ue,handleSubmit:K,reset:ee,formState:{errors:De}}=Be(),te=t=>{},L=d.useCallback(t=>{Oe({id:i==null?void 0:i._id,data:{diseases:t}}).then(()=>{j.custom(a=>n.jsx(E,{t:a,text:"Diseases have been updated!"})),v()}).catch(a=>{j.custom(c=>n.jsx(k,{t:c,title:"Error",text:a.message}))})},[i]),se=()=>r==="create"?"Create Health Condition":"Update Wellness Concerns";d.useEffect(()=>{var t,a;O&&((t=$.current)==null||t.focus()),A&&((a=Y.current)==null||a.focus())},[O,A]);const oe=(t,a,c)=>{a(t.filter(l=>l!==c)),L(t.filter(l=>l!==c))},ne=(t,a,c)=>{a(t.filter(l=>l._id!==c._id)),ke({id:m,commentId:c._id}).then(l=>{j.custom(x=>n.jsx(E,{t:x,text:"Comment has been deleted!"})),v()}).catch(l=>{j.custom(x=>n.jsx(k,{t:x,title:"Error",text:l.message}))})},ae=(t,a)=>{a(t.target.value)};function re(){B&&y?(H(""),Ne({id:m,data:{category:B,comment:y}}).then(t=>{j.custom(a=>n.jsx(E,{t:a,text:"Comment has been added!"})),v()}).catch(t=>{j.custom(a=>n.jsx(k,{t:a,title:"Error",text:t.message}))}),M(""),R("")):H("Please select category and write comment.")}const _=(t,a,c,l,x)=>{c&&t.indexOf(c)===-1&&a([...t,c]),L([...t,c]),l(!1),x("")},X=t=>{const a={};return t==null||t.forEach(c=>{const{category:l}=c;a[l]||(a[l]=[]),a[l].push(c)}),a},ie=(t,a,c,l,x,C,z,le="")=>n.jsx("div",{className:"w-fit flex flex-wrap gap-1 h-auto",children:n.jsxs(U,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:[t==null?void 0:t.map((S,Ge)=>n.jsx(N,{closable:!0,color:"#7E60BF",onClose:()=>oe(t,a,S),children:S},S)),c?n.jsx(D,{ref:x,type:"text",size:"small",style:{width:120,marginTop:8,paddingLeft:"10px"},value:C,onChange:S=>ae(S,z),onBlur:()=>_(t,a,C,l,z),onPressEnter:()=>_(t,a,C,l,z)}):le!=="customText"&&n.jsxs(N,{onClick:()=>l(!0),style:{background:h.colorBgContainer,borderStyle:"dashed",marginTop:8},children:[n.jsx(Le,{})," Create New"]})]})}),ce={Allergy:"Environmental Sensitivities",Disability:"Movement Adaptations"};return n.jsx(ye,{handleSubmit:K(te),modalOPen:e,setModalOpen:s,title:se(),buttonText:r==="create"?"Create":"Update",isBottomButtomShow:!1,onclose:()=>{ee()},children:n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[n.jsxs("p",{className:"text-base font-semibold text-[#7E60BF] leading-none flex items-center gap-2",children:[n.jsx("div",{id:"dot",className:"w-2 h-2 bg-[#7E60BF] rounded-full"})," Conditions"]}),ie(g||[],w,O,J,$,V,q,"diseaseText")]}),p&&Object.keys(p).map((t,a)=>n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:`text-base font-semibold ${t==="Sensitivity"?"text-[#4ca6cf]":t==="Special Needs"?"text-[#f37f13]":"text-[#0a0a2b]"}  leading-none flex items-center gap-2 mb-2`,children:[n.jsx("div",{id:"dot",className:`w-2 h-2 ${t==="Sensitivity"?"bg-[#4ca6cf]":t==="Special Needs"?"bg-[#f37f13]":"bg-[#0a0a2b]"}  rounded-full`})," ",ce[t]??t]}),Array.isArray(p[t])?p[t].map((c,l)=>n.jsx(U,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:n.jsx(N,{closable:!0,color:c.category==="Sensitivity"?"#4ca6cf":c.category==="Special Needs"?"#f37f13":"#0a0a2b",onClose:()=>ne(p[t],x=>{T(C=>({...C,[t]:x}))},c),children:c.comment})},l)):n.jsx("p",{children:"No items available for this category"})]},a)),n.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[n.jsx("h3",{children:"Add New Comments"}),n.jsx(ze,{placeholder:"Select a category",style:{width:"100%"},size:"large",dropdownMatchSelectWidth:!1,onChange:M,value:B||null,options:[{value:"Sensitivity",label:"Sensitivity"},{value:"Special Needs",label:"Special Needs"},{value:"Custom Text",label:"Custom Text"}]}),n.jsxs("div",{className:"flex mb-2",children:[n.jsx(D,{ref:Z,value:y,onChange:t=>R(t.target.value),placeholder:"Enter comment",style:{flex:1,paddingLeft:"10px"}}),n.jsx(Ee,{onClick:re,type:"primary",style:{marginLeft:8,backgroundColor:"#252f67",width:"100px"},children:"Add"})]}),F&&n.jsx("p",{className:"text-red-500",children:F})]})]})})}export{Je as H};
