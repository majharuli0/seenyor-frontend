import{gV as O,gU as b,r as d,S as B,i as l,j as g,t as C,E as w}from"./index-CR4fhODd.js";var D={exports:{}};(function(a,c){(function(n,s){a.exports=s()})(O,function(){return function(n,s){s.prototype.isSameOrAfter=function(o,i){return this.isSame(o,i)||this.isAfter(o,i)}}})})(D);var N=D.exports;const V=b(N);var M={exports:{}};(function(a,c){(function(n,s){a.exports=s()})(O,function(){return function(n,s){s.prototype.isSameOrBefore=function(o,i){return this.isSame(o,i)||this.isBefore(o,i)}}})})(M);var k=M.exports;const R=b(k);l.extend(V);l.extend(R);function K({data:a,fromDate:c,toDate:n,valueType:s="duration"}){const[o,i]=d.useState([]),{sleepEventsType:S,sleepEventsColor:A}=d.useContext(B);d.useEffect(()=>{i(Array.isArray(a)?a:[])},[a]);const m=(p,x)=>{if(x==="duration"){const h=Math.floor(p/60),y=p%60;return`${h}hr ${y}m`}return p.toString()},j=d.useMemo(()=>{const x=((e,t)=>{const r=[];let u=l(e);const f=l(t);for(;u.isSameOrBefore(f);)r.push(u.format("YYYY-MM-DD")),u=u.add(1,"day");return r})(c,n),h=(Array.isArray(o)?o:[]).reduce((e,t)=>{if(!(t!=null&&t.date)||!(t!=null&&t.data))return e;const r=l(t.date).format("YYYY-MM-DD");return e[r]=t.data,e},{}),y=[...new Set((Array.isArray(o)?o:[]).flatMap(e=>{var t;return((t=e==null?void 0:e.data)==null?void 0:t.map(r=>r.status))||[]}))],v=Object.entries(S).filter(([e])=>y.includes(e)),Y=v.map(([e,t])=>{const r=x.map(u=>{const f=h[u],E=f==null?void 0:f.find($=>$.status===e);return E?Number(E.value):0});return{name:t,type:"bar",stack:"total",data:r,barMaxWidth:20,itemStyle:{color:A[t]}}});return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=`${e[0].axisValue}<br/>`;return e.forEach(r=>{r.value>0&&(t+=`${r.marker} ${r.seriesName}: ${m(r.value,s)}<br/>`)}),t}},legend:{data:v.map(([e,t])=>t)},xAxis:{type:"category",data:x},yAxis:{type:"value",axisLabel:{formatter:e=>m(e,s)}},series:Y}},[o,c,n,S,A,s]);return(a==null?void 0:a.length)===0||!n||!c?g.jsx(C,{description:"No data available to show"}):g.jsx(w,{option:j,style:{height:"350px"}})}export{K as default};
