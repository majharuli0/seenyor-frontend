import{r as d,bN as b,bO as m,j as s,J as v,bP as u,bR as N,bQ as g,bW as w,bX as C}from"./index-CR4fhODd.js";function p({data:i={}}){const{deviceData:r}=d.useContext(b),o=d.useContext(m),{elderlyDetails:n}=o||{},l=(i==null?void 0:i.device_no)||(n==null?void 0:n.deviceId),[t,j]=d.useState([]);d.useEffect(()=>{var c;const e=((c=r[l])==null?void 0:c.position)||[];j(e)},[r,l]);const f=d.useMemo(()=>{const e=r[l],c=e==null?void 0:e.hbstaticsTimestamp,a=Date.now();return!(e!=null&&e.hbstatics)||!c||(a-c)/1e3>90?null:e.hbstatics},[r[l]]);return s.jsxs("div",{className:"flex gap-2 h-fit",children:[s.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[(t==null?void 0:t.length)>0?s.jsx(v,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:t==null?void 0:t.map((e,c)=>s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-2 rounded-full",children:s.jsx(u,{size:14,color:"white"})}),s.jsx("div",{children:s.jsx("p",{className:"text-sm m-0",children:e==null?void 0:e.posture})})]},c)),children:s.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:t==null?void 0:t.map((e,c)=>s.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-1 rounded-full border-2 border-white",children:s.jsx(u,{size:16,color:"white"})},c))})}):s.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:s.jsx(u,{size:16,color:"white"})}),s.jsx("span",{className:"font-bold text-lg",children:t?t==null?void 0:t.length:0})]}),(i==null?void 0:i.room_type)==2&&f&&s.jsx("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit px-2 py-1",children:(()=>{var c,a,x,h;const e=N(f);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pr-1",children:s.jsx(g,{size:20,color:((a=(c=e==null?void 0:e.statusEvents)==null?void 0:c.sleepState)==null?void 0:a.color)||"gray"})}),s.jsx("span",{className:"font-semibold text-wrap",children:((h=(x=e==null?void 0:e.statusEvents)==null?void 0:x.sleepState)==null?void 0:h.label)||"--"})]})})()})]})}function I(){var o;const i=d.useContext(m),{elderlyDetails:r}=i||{};return s.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(r==null?void 0:r.rooms)&&((o=r==null?void 0:r.rooms)==null?void 0:o.filter(n=>n.device_no).map((n,l)=>s.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[s.jsx("h1",{className:"text-2xl font-bold",children:n==null?void 0:n.name}),s.jsxs("div",{className:"flex h-full",children:[s.jsx(p,{data:n}),s.jsxs("div",{id:"roomMap",className:"w-fit h-full mt-14 mx-auto",children:[(n==null?void 0:n.mount_type)===2&&s.jsx(w,{roomInfo:n}),(n==null?void 0:n.mount_type)===1&&s.jsx(C,{roomInfo:n})]})]})]},l)))})}export{I as default};
