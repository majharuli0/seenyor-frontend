import{r as l,j as e,gR as b,B as m,gS as f,bb as j,gT as S,T as u,$ as h,aD as g}from"./index-CR4fhODd.js";import{c as y,b as N}from"./subscriptions-Dbjy7cDX.js";import{C,S as D}from"./SubDetails-AyXcTWom.js";import{a as A,R as p}from"./SyncOutlined-CFNNNG5J.js";import"./SyncOutlined-BXCvzby4.js";function v({data:t={}}){const[n,s]=l.useState(!1),r=i=>{i.key==="1"&&s(!0)},o=[{label:"Cancel Subscription",key:"1",danger:!0}];function x(i){y({subscriptionId:t==null?void 0:t.sub_id,cancellationReason:i}).then(c=>{console.log(c)}).catch(c=>{console.log(c)})}return e.jsxs("div",{children:[e.jsx(b,{menu:{items:o,onClick:r},trigger:["click"],placement:"bottomRight",children:e.jsx(m,{onClick:i=>i.preventDefault(),shape:"circle",icon:e.jsx(f,{})})}),e.jsx(C,{modalOpen:n,setModalOpen:s,onCancelSubscription:x})]})}const R=[{title:"Subscription Created At",render:t=>e.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:j(t==null?void 0:t.created_at)||"N/A"})},{title:"User ",render:t=>{var n,s;return e.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:((s=(n=t==null?void 0:t.StripeEventData)==null?void 0:n.metadata)==null?void 0:s.user_email)||"N/A"})}},{title:"Subscription ID",render:t=>{var n;return e.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:((n=t==null?void 0:t.StripeEventData)==null?void 0:n.id)||"N/A"})}},{title:"Product ID",render:t=>{var n,s;return e.jsx("button",{children:e.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:((s=(n=t==null?void 0:t.StripeEventData)==null?void 0:n.plan)==null?void 0:s.product)||"N/A"})})}},{title:"Amount",render:t=>e.jsx("button",{children:e.jsxs("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap uppercase",children:["$",(t==null?void 0:t.real_amount_decimal)/100||0," ",(t==null?void 0:t.currency)||"USD"]})})},{title:"Subscription Expire Date",render:t=>{var n;return e.jsx("button",{children:e.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:S((n=t==null?void 0:t.StripeEventData)==null?void 0:n.current_period_end)||"N/A"})})}},{title:"Subscription Status",render:t=>(crypto.getRandomValues(new Uint8Array(1))[0]/255<.5,e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary",children:[(t==null?void 0:t.SubscriptionStatus)==="cancelled"&&e.jsx(u,{icon:e.jsx(A,{}),className:"font-semibold",children:"Canceled"}),(t==null?void 0:t.SubscriptionStatus)==="active"&&e.jsx(u,{icon:e.jsx(p,{spin:!0}),color:"success",className:"font-semibold",children:"Active"}),(t==null?void 0:t.SubscriptionStatus)==="trialing"&&e.jsx(u,{icon:e.jsx(p,{spin:!0}),color:"warning",className:"font-semibold",children:"Trialing"})]})}))},{title:"Details",render:t=>(crypto.getRandomValues(new Uint8Array(1))[0]/255<.5,e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary flex items-center gap-1",children:e.jsx(D,{data:t})})}))},{title:"Action",render:t=>e.jsx("button",{children:e.jsx(v,{data:t})})}];function I(){const[t,n]=l.useState(!0),[s,r]=l.useState({}),[o,x]=l.useState(0),[i,c]=l.useState([]),d=l.useCallback(()=>{n(!0),N(s).then(a=>{c(a==null?void 0:a.data),x(a==null?void 0:a.total)}).then(a=>{console.error("Error fetching subscriptions:",a)}).finally(()=>{n(!1)})},[s]);return l.useEffect(()=>{d()},[d]),e.jsx(e.Fragment,{children:e.jsxs("div",{id:"refunds_request",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[e.jsx("div",{id:"Recently_Closed_Alerts_Header",className:"w-full flex justify-between",children:e.jsx("h2",{className:" text-2xl font-bold text-text-primary",children:"All Subscribed User"})}),e.jsx(h.Provider,{value:{total:o,page:s,SetPage:r,getList:d},children:e.jsx(g,{loading:t,columns:R,tableData:i,showPagination:!1})})]})})}export{I as default};
