import{j as e,E as D,L as H,I as K,M as P,a as z,R as B,b as Y,c as $,d as O,e as U,F as W,f as V,u as G,r as c,S as Z,C as m,g as w,D as q,h as N,i as J,k as A}from"./index-CR4fhODd.js";import"./request-BcXuuXiC.js";import"./lines-D7etGvqp.js";import"./index-C_UpaPkQ.js";import{u as Q}from"./useTranslation-7egdIsqU.js";function S({data:l,graphTitle:u}){const p=l==null?void 0:l.map(o=>o.name),x=l==null?void 0:l.map(o=>o.total_sales),d=10,i={xAxis:{max:"dataMax"},tooltip:{formatter:function(o){return`${o.marker}${o.name}<br/>$${o.value}`}},grid:{left:"0%",right:"0%",bottom:"10%",top:"5%",containLabel:!0},yAxis:{type:"category",data:p,inverse:!0,animationDuration:300,animationDurationUpdate:300,axisLabel:{formatter:function(o){return o.length>d?o.substring(0,d)+"...":o}}},dataZoom:[{type:"inside",yAxisIndex:0,start:0,end:100}],series:[{name:u,type:"bar",data:x,itemStyle:{color:"#4379EE"},label:{show:!0,valueAnimation:!0,formatter:function(o){return`$${o.value}`}},barWidth:x.length<5?30:"auto"}],legend:{show:!1},graphic:x.length===0?{type:"text",left:"center",top:"middle",style:{text:"No Data Available",fontSize:20,fontWeight:"bold",fill:"#999"}}:null};return e.jsx(D,{notMerge:!0,option:i,style:{width:"100%",height:"100%"}})}function X({data:l}){const u={monitoring_station:"#D90000",end_user:"#4379EE",nursing_home:"#F1963A"},p={monitoring_station:"Control Centers Sales",end_user:"End User Sales",nursing_home:"Nursing Home sales"},d=l.filter(r=>["nursing_home","end_user","monitoring_station"].includes(r.role)).map(r=>({value:r.count,name:p[r.role]||r.role,itemStyle:{color:u[r.role]}})),i=d.reduce((r,f)=>r+f.value,0),o={tooltip:{trigger:"item"},grid:{left:"0%",right:"0%",bottom:"0%",top:"0%",containLabel:!0},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!1}},labelLine:{show:!0},data:d}],graphic:{elements:[{type:"text",id:"center-total-text",left:"center",top:"53%",style:{text:"Total",textAlign:"center",fill:"#333",fontSize:16}},{type:"text",id:"center-value-text",left:"center",top:"45%",style:{text:i,textAlign:"center",fill:"#333",fontSize:22,fontWeight:"bold"},position:[0,50]}]}};return e.jsx(D,{notMerge:!0,option:o,style:{width:"340px",height:"340px"}})}const ee=[{role:"monitoring_agency",labelKey:"roles.monitoring_stations",tab:"Monitoring Stations",color:"#5096F6",icon:H},{role:"distributor",labelKey:"roles.distributors",tab:"Distributors",color:"#FA8035",icon:K},{role:"office",labelKey:"roles.offices",tab:"Offices",color:"#D188E1",icon:P},{role:"sales_agent",labelKey:"roles.sales_agents",tab:"Sales Agents",color:"#9C27B0",icon:z},{role:"nursing_home",labelKey:"roles.nursing_homes",tab:"Nursing Homes",color:"#3F51B5",icon:B},{role:"nurse",labelKey:"roles.nurses",tab:"Nurses",color:"#F3C623",icon:Y},{role:"monitoring_station",labelKey:"roles.control_centers",tab:"Control Centers",color:"#EA5A92",icon:$},{role:"installer",labelKey:"roles.installers",tab:"Installers",color:"#4CAF50",icon:O},{role:"supports_agent",labelKey:"roles.support_agents",tab:"Support Agents",color:"#17C3A5",icon:U},{role:"end_user",labelKey:"roles.end_users",tab:"End Users",color:"#7DBBE2",icon:W},{role:"elderly",labelKey:"roles.users",tab:"Users",color:"#E91E63",icon:V}],{RangePicker:te}=q,ne=()=>{var j,v,C;const{t:l}=Q(),u=G(),{role:p}=c.useContext(Z),[x,d]=c.useState(!0),[i,o]=c.useState([]),[r,f]=c.useState([]),[n,L]=c.useState([]),[k,E]=c.useState([]);function M(){N().then(t=>{const a=(t==null?void 0:t.data)||[],s=ee.map(h=>{const g=a.find(T=>T.role===h.role);return{...h,count:g?g.count:0}});o(s)}).catch(t=>{console.log(t)})}function b(t="distributor"){const a=J().format("YYYY-MM-DD");A({role:t,to_date:a}).then(s=>{f(s.data)}).catch(s=>{console.log(s)})}function y(t,a){N({from_date:t,to_date:a}).then(s=>{L(s.data)}).catch(s=>{console.log(s)})}function _(t="-1"){A({role:"distributor",sort_by_sales:t}).then(a=>{var h;const s=(h=a.data)==null?void 0:h.filter(g=>g.name);E(s)}).catch(a=>{console.log(a)})}c.useEffect(()=>{M(),b(),y(),_()},[]);function F(t){b(t.value)}function I(t){_(t.value)}function R(t){y(t[0],t[1])}return e.jsxs("div",{className:"w-full flex flex-col gap-6 pt-6",children:[e.jsx("div",{className:"rounded-2xl w-full flex flex-col gap-6 h-full",children:e.jsx("div",{id:"Reports",className:"w-full rounded-2xl flex flex-col gap-6",children:e.jsx("div",{id:"Cards",className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7",children:i==null?void 0:i.map((t,a)=>{let s=t.icon;return e.jsxs("div",{id:"Card",onClick:()=>t.tab?u(`/super-admin/users?tab=${t.tab}`):null,className:"cursor-pointer group flex w-full items-center p-4 py-6 bg-[#fff] text-white gap-3 rounded-[12px] relative overflow-hidden",children:[e.jsx("div",{id:"circle",style:{backgroundColor:t.color,opacity:"0.9"},className:"w-[100px] h-[100px] absolute -right-11 -top-14 rounded-full group-hover:-right-5 group-hover:-top-[75px] transition-all duration-200 ease-in-out"}),e.jsx("div",{id:"circle",style:{backgroundColor:t.color,opacity:"0.2"},className:"w-[100px] h-[100px] absolute -right-3 -top-[70px] rounded-full group-hover:-right-[50px] group-hover:-top-[45px] transition-all duration-200 ease-in-out"}),e.jsx("div",{style:{backgroundColor:`${t.color}15`},className:"h-fit rounded-[8px] p-2",children:s&&e.jsx(s,{style:{color:t==null?void 0:t.color},size:20})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("h1",{className:"text-[26px] font-semibold leading-none text-text-primary",children:t.count?t.count:0}),e.jsx("span",{className:"text-[14px] font-medium text-text-primary/70 leading-none",children:l(t.labelKey)})]})]},a)})})})}),e.jsxs("div",{className:"w-full flex  gap-6 lg:flex-row flex-col",children:[e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white lg:w-[65%] w-full  h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:l("graph_chart.today_sales","Today's Sales")}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:e.jsx(m,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(w,{optionFilterProp:"label",onChange:F,defaultValue:"distributor",size:"large",dropdownMatchSelectWidth:!1,labelInValue:!0,options:[{value:"distributor",label:l("roles.distributor")},{value:"sales_agent",label:l("roles.sales_agent")},{value:"monitoring_station",label:l("roles.control_center")},{value:"nursing_home",label:l("roles.nursing_home")}]})})})]}),e.jsx(S,{data:r,graphTitle:l("today_sales","Today's Sales")})]}),e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white lg:w-[35%] w-full  h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:l("graph_chart.total_sales")}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:e.jsx(m,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(te,{showTime:!1,style:{width:"200px",borderRadius:"10px",height:"40px",zIndex:"1"},size:"large",placeholder:[l("pick_date_range_start","Pick Data Range (Start)"),l("pick_date_range_end","End")],format:"YYYY-MM-DD",onChange:(t,a)=>R(a)})})})]}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(X,{data:n})}),e.jsxs("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:[e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#4379EE] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:l("graph_chart.end_user_sales")})]}),e.jsx("span",{className:"text-lg font-semibold",children:((j=n==null?void 0:n.find(t=>t.role==="end_user"))==null?void 0:j.count)||0})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#F1963A] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:l("graph_chart.nursing_home_sales")})]}),e.jsxs("span",{className:"text-lg font-semibold",children:[" ",((v=n==null?void 0:n.find(t=>t.role==="nursing_home"))==null?void 0:v.count)||0]})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#D90000] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:l("graph_chart.control_centers_sales")})]}),e.jsx("span",{className:"text-lg font-semibold",children:((C=n==null?void 0:n.find(t=>t.role==="monitoring_station"))==null?void 0:C.count)||0})]})]})]})]}),e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white  w-full  h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:l("graph_chart.distributor_sales")}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:e.jsx(m,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(w,{optionFilterProp:"label",onChange:I,defaultValue:"-1",size:"large",dropdownMatchSelectWidth:!1,labelInValue:!0,options:[{value:"-1",label:l("high_to_low","High to Low")},{value:"1",label:l("low_to_high","Low to High")}]})})})]}),e.jsx(S,{data:k,graphTitle:l("distributor_sales","Distributor Sales")})]})]})};export{ne as default};
