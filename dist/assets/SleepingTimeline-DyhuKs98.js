import{r as l,bO as I,S as M,j as t,k0 as W,jB as A,t as $,lh as E}from"./index-CR4fhODd.js";import{T as B}from"./Template-BLv2RFpl.js";import{S as H}from"./SkeletonSleepingTimeline-DL4Wt8st.js";import{aC as L}from"./SleepHynogram-DfUa7E06.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./FileOutlined-CocyS7bT.js";const i=({time:e,ItemName:r,color:m})=>t.jsxs("div",{className:"flex items-center gap-2 text-sm py-2 px-4 bg-white rounded-lg shadow-sm border border-text-primary/10",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[r!="Fell Asleep"&&r!="Wake Up"&&t.jsx("div",{className:"w-3 h-3 rounded border-2 border-white shadow-sm",style:{backgroundColor:m}}),t.jsx("span",{className:"text-gray-600 font-medium min-w-[60px]",children:r})]}),t.jsx("span",{className:"text-gray-600 text-sm font-bold",children:e})]});function G(){var u,p,f,h,j,g,_,y,v,S;const{sleepData:e,elderlyDetails:r,sleepDataLoading:m}=l.useContext(I),{sleepEventsType:d,sleepEventsColor:x}=l.useContext(M),[o,w]=l.useState([]),F={title:"Sleep Timeline Summary",pickerTypes:["day","range"],chartType:"multibar",dataType:"duration",color:"#FF725E",icon:t.jsx(E,{}),apisProps:{endpoint:W,query:{uids:r==null?void 0:r.deviceId}}};function n(s){if(s==0)return"0m";if(s<60)return`${s}m`;const a=Math.floor(s/60),c=s%60;return`${a}hr ${c}m`}function k(s,a,c){const b={};return s.forEach(N=>{const C=N.status,T=a[C];b[C]={name:T,value:Number(N.value)||0,color:c[T]||"#CCCCCC"}}),b}return l.useEffect(()=>{if(e!=null&&e.sleep_index_common_list){console.log(e==null?void 0:e.get_bed_idx);const s=k(e.sleep_index_common_list,d,x);console.log(e),w(s)}},[e,d,x]),t.jsx(B,{title:"Sleep Timeline",color:"#FF725E",icon:t.jsx(E,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:F,children:m?t.jsx(H,{}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e&&(e==null?void 0:e.leave_bed_idx)&&t.jsx(i,{time:A(e==null?void 0:e.sleep_st_idx),ItemName:"Fell Asleep",color:"#AAA492"}),e&&(e==null?void 0:e.sleep_ed_idx)&&t.jsx(i,{time:A(e==null?void 0:e.sleep_ed_idx),ItemName:"Woke Up",color:"#AAA492"})]}),((u=e==null?void 0:e.statistical_data)==null?void 0:u.length)&&t.jsx(L,{sleepData:e==null?void 0:e.statistical_data,height:260}),!((p=e==null?void 0:e.statistical_data)!=null&&p.length)&&t.jsx($,{description:"No Data Detected for Today"}),t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-center mt-12",children:[o&&o[1]&&t.jsx(i,{time:n((f=o[1])==null?void 0:f.value),ItemName:"Light Sleep",color:(h=o[1])==null?void 0:h.color}),o&&o[0]&&t.jsx(i,{time:n((j=o[0])==null?void 0:j.value),ItemName:"Deep Sleep",color:(g=o[0])==null?void 0:g.color}),o&&o[7]&&t.jsx(i,{time:n((_=o[7])==null?void 0:_.value),ItemName:"REM",color:(y=o[7])==null?void 0:y.color}),o&&o[2]&&t.jsx(i,{time:n((v=o[2])==null?void 0:v.value),ItemName:"Awake After Sleep",color:(S=o[2])==null?void 0:S.color}),e&&(e==null?void 0:e.leave_bed_count)>=0&&t.jsx(i,{time:(e==null?void 0:e.leave_bed_count)+"x",ItemName:"Bed Exit After Sleep",color:"#FF725E"})]})]})})}export{G as default};
