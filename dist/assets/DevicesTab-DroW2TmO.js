import{r as n,bO as m,j as s,kR as g,kS as N,kT as _,kU as d,T as b,B as j,kV as y,bY as k,m as D,kW as C}from"./index-CR4fhODd.js";function I(){var a;const{elderlyDetails:e}=n.useContext(m);return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-[24px] font-bold text-[#1B2559]",children:"Devices"})}),s.jsx("div",{id:"devices",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:(a=e==null?void 0:e.rooms)==null?void 0:a.filter(l=>l==null?void 0:l.device_no).map(l=>s.jsx(O,{device:l},l.id))})]})})}const O=({device:e={}})=>{const[a,l]=n.useState(!1),[u,x]=n.useState(!1),{elderlyDetails:h}=n.useContext(m),[S,f]=n.useState(!1),[o,p]=n.useState(),r=e==null?void 0:e.device_no,c=n.useCallback(async()=>{if(r){f(!0);try{const i=await g(r);p(i==null?void 0:i.data)}catch(i){console.error("Error fetching device info",i)}finally{f(!1)}}},[r]);n.useEffect(()=>{c();const i=setInterval(()=>{c()},5e3);return()=>clearInterval(i)},[c]);const t=(o==null?void 0:o.signal_intensity)&&N("wifi",o==null?void 0:o.signal_intensity);return s.jsxs("div",{className:"flex flex-col gap-8 bg-white rounded-xl p-4 group  cursor-pointer device_modal",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 w-full ",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{id:"deviceImg",children:s.jsx("img",{src:_,alt:"device",width:84,height:84})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("h1",{className:"text-[22px] font-semibold text-[#1B2559] flex items-center gap-2",children:[e==null?void 0:e.name," ",s.jsx("div",{className:"size-1.5 bg-slate-400 rounded-full"}),s.jsx("span",{className:"text-base opacity-85 cursor-pointer",children:e==null?void 0:e.device_no})]}),s.jsxs("div",{id:"status",className:"flex items-center gap-2",children:[e!=null&&e.is_device_bind?s.jsx(d,{color:t==null?void 0:t.color}):s.jsx(d,{color:"red"}),s.jsx("p",{className:"text-[16px] font-semibold text-primary capitalize",children:e!=null&&e.is_device_bind?"Online":"Offline"}),t&&s.jsx(b,{color:t==null?void 0:t.color,children:t.label})]})]})]}),s.jsxs(j,{onClick:()=>{e!=null&&e.is_device_bind?l(!0):x(!0)},children:[s.jsx(y,{})," Settings"]})]}),s.jsx(k,{isvisible:a,setVisible:l,elderly_id:h._id,device_id:e==null?void 0:e.device_no,room_id:e==null?void 0:e._id}),s.jsx(w,{isvisible:u,setVisible:x})]})},w=({isvisible:e=!1,setVisible:a})=>{function l(){a(!1)}return s.jsx(s.Fragment,{children:s.jsx(D,{centered:!0,open:e,onCancel:l,onOk:l,className:"device-offline-modal ",title:s.jsxs("div",{className:"flex items-center gap-2 p-6",children:[s.jsx(C,{className:"text-yellow-500"}),s.jsx("span",{children:"Offline Device"})]}),footer:s.jsx("div",{className:"p-6",children:s.jsx(j,{onClick:()=>a(!1),children:"Ok"})}),okText:"OK",cancelButtonProps:{style:{display:"none"}},children:s.jsx("div",{className:"px-4",children:s.jsx("p",{children:"This device is currently offline. You cannot make any changes now."})})})})};export{I as default};
