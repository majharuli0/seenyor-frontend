import{r as a,bO as M,i as x,kD as k,j as u}from"./index-CR4fhODd.js";import{T as F}from"./Template-BLv2RFpl.js";import{g as B}from"./utiles-Cxfq-lBl.js";import G from"./barChart-CY3WFCIy.js";import{S as I}from"./SkeletonBarChart-BNNP2f43.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function K({isSummaryBtn:D=!0}){const{title:g,color:m,icon:R,dataAnalysis:S,summaryProps:b,description:E}=B("Heart Rate Anomaly Statistic"),Y=a.useContext(M),{chartToDate:i="",chartFromDate:f="",elderlyDetails:t}=Y||{},[r,_]=a.useState(x().subtract(1,"day").format("YYYY-MM-DD")),[s,j]=a.useState(x().subtract(31,"day").format("YYYY-MM-DD")),[v,C]=a.useState([]),[H,n]=a.useState(!0),d=a.useCallback(()=>{if(!(t!=null&&t.deviceId)||!t._id||!s||!r){n(!1);return}n(!0),k({uids:t==null?void 0:t.deviceId,elderly_id:t._id,to_date:s,from_date:r}).then(e=>{const o=T(e==null?void 0:e.data);C(o),n(!1)}).catch(e=>{console.log(e),n(!1)})},[r,s,t]);a.useEffect(()=>{d()},[d]),a.useEffect(()=>{i&&f&&(_(i),j(f))},[i,f]);function T(e){const o=[];return e==null||e.forEach(c=>{var l;const p=c.date;(l=c==null?void 0:c.events)==null||l.forEach(h=>{if(h.event_type===14||h.event_type===15){const y=o.find(A=>A.date===p);y?y.anomalyHeartRate+=1:o.push({date:p,anomalyHeartRate:1})}})}),o}return u.jsx(F,{title:g,color:m,icon:R,dataAnalysis:S,description:E,isSummaryBtn:D,summaryProps:b,children:H?u.jsx(I,{barGroups:25,barsPerGroup:2,gridLines:5,barWidth:40}):u.jsx(G,{data:v,color:m,dataType:"number",fromDate:s,toDate:r,chartFor:"heartRateAnomaly"})})}export{K as default};
