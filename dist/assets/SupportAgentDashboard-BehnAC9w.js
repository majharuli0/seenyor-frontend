import{r as s,aF as m,u as Y,aH as D,i as x,br as I,W as z,j as e,C as f,bs as F,_ as r,bt as P,$ as O,aD as B,D as Q}from"./index-CR4fhODd.js";import{M as $}from"./index-CsWiTKLq.js";import{A as W,R as K,a as G,b as J}from"./mock-BDYknMi8.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import{c as U}from"./regex-bntiaqjT.js";import{C as X}from"./CreateAndEditModal-96LLu7le.js";import{R as Z}from"./HomeOutlined-DkUaH10G.js";import"./AimOutlined-CdBlFKiW.js";import"./Collapse-BT_swdD9.js";import"./index-DcENZuzz.js";import"./CustomInput-B54BPh_e.js";import"./HomeOutlined-HRDkLfHL.js";const{RangePicker:ve}=Q;function ye(){const[u,j]=s.useState("Map View"),[v,y]=s.useState(!1),[ee,te]=s.useState([]);m("activeAlert");const b=m("recentlyClosedAlert"),[w,A]=s.useState([]),[i,S]=s.useState(1),[C,_]=s.useState(0),[se,N]=s.useState([]),[M,ae]=s.useState([]),[le,R]=s.useState(0);m("events");const[E,n]=s.useState(!0),[re,oe]=s.useState(null),[c,g]=s.useState(),[a,L]=s.useState(""),[H,T]=s.useState(!1),k=Y(),d=s.useCallback(()=>{n(!0),D({to_date:x().subtract(2,"days").format("YYYY-MM-DD"),from_date:x().format("YYYY-MM-DD"),is_resolved:!0,lookup:!1,page:i}).then(t=>{_(t.total),n(!1),A(t.data)}).catch(t=>{n(!1),console.log(t)})},[i]);s.useEffect(()=>{d()},[d]);const h=s.useCallback(()=>{I({to_date:"2024-11-30",from_date:x().format("YYYY-MM-DD"),page:M}).then(t=>{R(t.total),t.data.length>0&&N(t.data)}).catch(t=>{console.log(t)})},[i]);s.useEffect(()=>{h()},[h]);const p=s.useCallback(()=>{if(a.trim()===""){g([]);return}z({search:a}).then(t=>{g(t==null?void 0:t.data)}).catch(t=>{console.log(t)})},[a]);s.useEffect(()=>{p()},[p]);const l=(t,o)=>{if(!o)return t;const V=U(o,"gi");return t.replace(V,'<mark style="background-color: #80CAA7; color: white;">$1</mark>')};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 flex-col pt-8 pb-8",children:[e.jsx("div",{className:"flex item-center justify-between w-full",children:e.jsx(f,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsxs("div",{className:"w-[350px] relative",children:[e.jsx(F,{className:"rounded-[10px]  min-w-[350px] w-full ",size:"large",placeholder:"Search Anything",style:{height:"44px"},onChange:t=>L(t.target.value),onFocus:()=>T(!0)}),H&&a.trim()!==""&&e.jsx("div",{id:"searchResult",className:"mt-3 max-h-[600px] overflow-auto rounded-lg shadow-lg bg-white border border-gray-300 absolute top-10 left-0 z-[1000] w-full",children:e.jsx("ul",{children:c==null?void 0:c.map(t=>e.jsxs("li",{className:"p-4 hover:bg-gray-100 border-b border-gray-200 cursor-pointer",onClick:()=>{k(`/supporter/elderlies/elderly-profile/${t==null?void 0:t._id}`)},children:[e.jsx("div",{className:"font-semibold text-lg text-gray-800",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:r.sanitize(l(t.name,a))}})}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Age:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r.sanitize(l(t.age.toString(),a))}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Address:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r.sanitize(l(t.address||"N/A",a))}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Sensitivity Factors:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r.sanitize(l(t.diseases.join(", "),a))}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Comments:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:r.sanitize(l(t.comments.map(o=>o.comment).join(", "),a))}})]})]},t._id))})})]})})}),e.jsx("div",{className:"w-full",children:e.jsx(W,{refreshAlertList:d,isElderlyVisible:!0})}),e.jsxs("div",{className:"w-full flex gap-4 md:flex-row flex-col",children:[e.jsx("div",{className:"w-full  p-0 ",children:e.jsxs("div",{className:"bg-white  rounded-2xl  p-6 h-[600px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Alerts View"}),e.jsx(P,{size:"large",options:q,onChange:t=>j(t)})]}),u==="Map View"&&e.jsx($,{}),u==="Room View"&&e.jsx(K,{})]})}),e.jsx("div",{className:"bg-white w-full md:w-[48%] rounded-2xl p-6 h-[600px] overflow-hidden",children:e.jsx(G,{})})]}),e.jsxs("div",{id:"Recently_Closed_Alerts",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6",children:[e.jsxs("div",{id:"Recently_Closed_Alerts_Header",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Past Alerts"}),e.jsx("div",{children:e.jsx(f,{theme:{components:{Segmented:{itemSelectedBg:"#252F67",itemSelectedColor:"#fff",fontFamily:"Baloo2"}}}})})]}),e.jsx("div",{id:"Recently_Closed_Alerts_Table",className:"w-full",children:e.jsx(O.Provider,{value:{total:C,page:1,SetPage:S,limit:6},children:e.jsx(B,{loading:E,pageSize:6,tableData:w,columns:b})})})]})]}),e.jsx(X,{modalOpen:v,setModalOpen:y,type:"event"})]})}const q=[{label:" Map View",value:"Map View",icon:e.jsx(J,{})},{label:"Room View",value:"Room View",icon:e.jsx(Z,{})}],be=[{label:"All Alerts",value:"All Alerts"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Informational"}];export{be as activeAlertSegmentOptions,q as alertViewSegmentOptions,ye as default};
