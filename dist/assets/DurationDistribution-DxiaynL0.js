import{r as e,bO as y,i as b,jW as M,j as h}from"./index-CR4fhODd.js";import"./mockData-Bpurtgqo.js";import _ from"./barChart-CY3WFCIy.js";import{T as B}from"./Template-BLv2RFpl.js";import{g as F}from"./utiles-Cxfq-lBl.js";import"./WeeklyMonthlyPicker-BRoXS4CI.js";import"./SleepHynogram-DfUa7E06.js";import"./FileOutlined-CocyS7bT.js";function v({isSummaryBtn:R=!0}){const{title:d,color:u,icon:x,dataAnalysis:g,summaryProps:A,description:S}=F("Duration Distribution"),Y=e.useContext(y),{chartToDate:r="",chartFromDate:c="",elderlyDetails:o}=Y||{},[a,j]=e.useState(b().subtract(1,"day").format("YYYY-MM-DD")),[n,C]=e.useState(b().subtract(31,"day").format("YYYY-MM-DD")),[E,m]=e.useState([]),p=e.useCallback(()=>{!(o!=null&&o.bedRoomIds)||!(o!=null&&o._id)||!n||!a||M({uids:o==null?void 0:o.bedRoomIds,elderly_id:o._id,to_date:n,from_date:a}).then(t=>{T(t==null?void 0:t.data),m(t==null?void 0:t.data)}).catch(t=>{console.log(t)})},[a,n,o]);e.useEffect(()=>{p()},[p]),e.useEffect(()=>{r&&c&&(j(r),C(c))},[r]);function T(t){const D=Array(12).fill(0);t==null||t.forEach(s=>{const i=Math.round(s.sleepDuration);i>=1&&i<=12&&(D[i-1]+=1)});const f=(t==null?void 0:t.length)||0,l=D.map((s,i)=>({hour:i+1,percentage:f>0?s/f*100:0}));m(l),console.log(l)}return h.jsx(B,{title:d,color:u,icon:x,dataAnalysis:g,description:S,isSummaryBtn:!1,children:h.jsx(_,{data:E,dataType:"percentage",xUnit:"hour",chartFor:"durationDistribution",color:u,toDate:"",fromDate:""})})}export{v as default};
